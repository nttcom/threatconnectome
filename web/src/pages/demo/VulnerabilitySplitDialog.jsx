import {
  InfoOutlined,
  VerifiedUserOutlined,
  WarningAmber,
  Settings,
  Article,
  ExpandMore,
  ArrowBackIosNew,
} from "@mui/icons-material";
import {
  Box,
  Dialog,
  DialogTitle,
  DialogContent,
  List,
  ListItemButton,
  Typography,
  Grid,
  Paper,
  TextField,
  MenuItem,
  Stack,
  ListItemText,
  Accordion,
  AccordionSummary,
  AccordionDetails,
  ListItem,
  Chip,
  useTheme,
  useMediaQuery,
  IconButton,
  Slide,
} from "@mui/material";
import { useState } from "react";

const vulnerabilitiesData = [
  {
    id: "CVE-2024-12345",
    title: "package.json",
    status: "å¯¾å¿œä¸­",
    assignee: "å±±ç”°å¤ªéƒ",
    deadline: "2025-11-01",
    ssvc: "Immediate", // å¤‰æ›´
    safetyImpact: "Critical",
    packageManager: "npm",
    target: "WebApp Server",
    affectedVersions: "1.0.0 - 1.2.0",
    fixedVersions: "1.2.1",
    mitigation: "ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³1.2.1ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ãã ã•ã„ã€‚",
    description:
      "ã“ã®è„†å¼±æ€§ã¯ã€ç‰¹å®šã®æ¡ä»¶ä¸‹ã§ãƒªãƒ¢ãƒ¼ãƒˆã®æ”»æ’ƒè€…ãŒä»»æ„ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã‚‚ã®ã§ã™ã€‚å½±éŸ¿ã‚’å—ã‘ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã§ã¯æ—©æ€¥ãªå¯¾å¿œãŒæ±‚ã‚ã‚‰ã‚Œã¾ã™ã€‚",
  },
  {
    id: "CVE-2024-54321",
    title: "requirements.txt",
    status: "æœªç€æ‰‹",
    assignee: "ä½è—¤èŠ±å­",
    deadline: "2025-12-15",
    ssvc: "Scheduled", // å¤‰æ›´
    safetyImpact: "High",
    packageManager: "pip",
    target: "Admin Panel",
    affectedVersions: "0.9.0 - 1.0.5",
    fixedVersions: "1.1.0",
    mitigation: "ãƒ‘ãƒƒãƒã®é©ç”¨ã€ã¾ãŸã¯WAFã§ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã‚’æ¨å¥¨ã—ã¾ã™ã€‚",
    description:
      "å…¥åŠ›å€¤ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚ºãŒä¸ååˆ†ãªãŸã‚ã€ã‚¯ãƒ­ã‚¹ã‚µã‚¤ãƒˆã‚¹ã‚¯ãƒªãƒ—ãƒ†ã‚£ãƒ³ã‚°ã®æ”»æ’ƒã«å¯¾ã—ã¦è„†å¼±ã§ã™ã€‚",
  },
  {
    id: "CVE-2024-55678",
    title: "pom.xml",
    status: "å¯¾å¿œä¸­",
    assignee: "éˆ´æœ¨æ¬¡éƒ",
    deadline: "2025-10-20",
    ssvc: "Out-of-cycle", // å¤‰æ›´
    safetyImpact: "Critical",
    packageManager: "maven",
    target: "Database Server",
    affectedVersions: "2.0.0 - 2.1.3",
    fixedVersions: "2.1.4",
    mitigation: "ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªã‚’åˆ©ç”¨ã—ã€æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ãã ã•ã„ã€‚",
    description:
      "SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚Šã€æ”»æ’ƒè€…ãŒä»»æ„ã®SQLã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã§ãã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
  },
  {
    id: "CVE-2024-56789",
    title: "Gemfile.lock",
    status: "æœªç€æ‰‹",
    assignee: "ç”°ä¸­ä¸€éƒ",
    deadline: "2025-11-30",
    ssvc: "Defer", // å¤‰æ›´
    safetyImpact: "Moderate",
    packageManager: "gem",
    target: "API Gateway",
    affectedVersions: "3.0.0 - 3.2.1",
    fixedVersions: "3.2.2",
    mitigation: "æœ€æ–°ãƒ‘ãƒƒãƒã®é©ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚",
    description: "å¤§é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚ˆã‚Šã‚µãƒ¼ãƒ“ã‚¹ãŒåœæ­¢ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
  },
  {
    id: "CVE-2024-67890",
    title: "package.json",
    status: "å¯¾å¿œä¸­",
    assignee: "é«˜æ©‹ç¾å’²",
    deadline: "2025-10-31",
    ssvc: "Immediate", // å¤‰æ›´
    safetyImpact: "Critical",
    packageManager: "npm",
    target: "Authentication Service",
    affectedVersions: "4.5.0 - 4.7.2",
    fixedVersions: "4.7.3",
    mitigation: "ãƒ‘ãƒƒãƒé©ç”¨å¾Œã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’å†èµ·å‹•ã—ã¦ãã ã•ã„ã€‚",
    description: "æ”»æ’ƒè€…ãŒä¸æ­£ã«æ¨©é™ã‚’æ˜‡æ ¼ã•ã›ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
  },
  {
    id: "CVE-2024-78901",
    title: "requirements.txt",
    status: "å®Œäº†",
    assignee: "ä½ã€…æœ¨å¥",
    deadline: "2025-09-15",
    ssvc: "Scheduled", // å¤‰æ›´
    safetyImpact: "High",
    packageManager: "pip",
    target: "User Data Service",
    affectedVersions: "1.3.0 - 1.4.5",
    fixedVersions: "1.4.6",
    mitigation: "æš—å·åŒ–é€šä¿¡ã®å°å…¥ã‚’æ¨å¥¨ã—ã¾ã™ã€‚",
    description: "ãƒ¦ãƒ¼ã‚¶æƒ…å ±ãŒç¬¬ä¸‰è€…ã«æ¼æ´©ã™ã‚‹ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚",
  },
  {
    id: "CVE-2024-89012",
    title: "package.json",
    status: "æœªç€æ‰‹",
    assignee: "ä¸­æ‘è‘µ",
    deadline: "2025-12-01",
    ssvc: "Defer", // å¤‰æ›´
    safetyImpact: "High",
    packageManager: "npm",
    target: "WebApp Client",
    affectedVersions: "0.8.0 - 1.0.0",
    fixedVersions: "1.0.1",
    mitigation: "CSRFãƒˆãƒ¼ã‚¯ãƒ³ã®å®Ÿè£…ã‚’æ¨å¥¨ã—ã¾ã™ã€‚",
    description: "ä¸æ­£ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ¦ãƒ¼ã‚¶ã®æ„å›³ã«åã—ã¦å®Ÿè¡Œã•ã›ã‚‹æ”»æ’ƒã‚’é˜²ãã¾ã™ã€‚",
  },
  {
    id: "CVE-2024-90123",
    title: "requirements.txt",
    status: "å¯¾å¿œä¸­",
    assignee: "æ¾æœ¬å¤§è¼”",
    deadline: "2025-11-15",
    ssvc: "Immediate", // å¤‰æ›´
    safetyImpact: "Critical",
    packageManager: "pip",
    target: "File Server",
    affectedVersions: "2.5.0 - 2.7.0",
    fixedVersions: "2.7.1",
    mitigation: "å…¥åŠ›æ¤œè¨¼ã®å¼·åŒ–ã‚’æ¨å¥¨ã—ã¾ã™ã€‚",
    description: "ä¸æ­£ãªãƒ‘ã‚¹æ“ä½œã«ã‚ˆã‚Šä»»æ„ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚Œã‚‹å±é™ºãŒã‚ã‚Šã¾ã™ã€‚",
  },
  {
    id: "CVE-2024-91234",
    title: "pom.xml",
    status: "å®Œäº†",
    assignee: "å°æ—çœŸä¸€",
    deadline: "2025-10-05",
    ssvc: "Out-of-cycle", // å¤‰æ›´
    safetyImpact: "Moderate",
    packageManager: "maven",
    target: "Authentication Service",
    affectedVersions: "3.1.0 - 3.3.5",
    fixedVersions: "3.3.6",
    mitigation: "ãƒ­ã‚°ã‚¤ãƒ³è©¦è¡Œã®ç›£è¦–ã‚’æ¨å¥¨ã—ã¾ã™ã€‚",
    description: "èªè¨¼ãƒã‚¤ãƒ‘ã‚¹ã«ã‚ˆã‚Šä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
  },
];

const statuses = ["æœªç€æ‰‹", "å¯¾å¿œä¸­", "å®Œäº†"];
const assignees = ["å±±ç”°å¤ªéƒ", "ä½è—¤èŠ±å­", "éˆ´æœ¨æ¬¡éƒ"];
const safetyImpacts = ["Critical", "High", "Medium", "Low"];

// å›ºå®šè¡¨ç¤ºç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
const FixedInfoItem = ({ label, value, icon }) => (
  <Box
    sx={{
      p: 1,
      height: "100%",
      display: "flex",
      flexDirection: "column",
      justifyContent: "center",
    }}
  >
    <Typography
      variant="caption"
      color="text.secondary"
      sx={{ display: "flex", alignItems: "center", gap: 0.5 }}
    >
      {icon}
      {label}
    </Typography>
    <Typography sx={{ fontWeight: 500, pl: 2.5 }}>{value}</Typography>
  </Box>
);

const getSsvcStyles = (ssvc) => {
  if (!ssvc) return { backgroundColor: "#bdbdbd", color: "black" }; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆã‚°ãƒ¬ãƒ¼ï¼‰

  const lowerSsvc = ssvc.toLowerCase();

  switch (lowerSsvc) {
    case "immediate":
      return { backgroundColor: "#d32f2f", color: "white", fontWeight: "bold" }; // èµ¤
    case "out-of-cycle":
      return { backgroundColor: "#f57c00", color: "white", fontWeight: "bold" }; // ã‚ªãƒ¬ãƒ³ã‚¸
    case "scheduled":
      return { backgroundColor: "#fbc02d", color: "black", fontWeight: "bold" }; // é»„è‰²
    case "defer":
      return { backgroundColor: "#9e9e9e", color: "white", fontWeight: "bold" }; // ç·‘
    default:
      return { backgroundColor: "#bdbdbd", color: "black", fontWeight: "bold" }; // ãã®ä»–
  }
};

export default function VulnerabilitySplitDialog({ open, onClose }) {
  // --- â¬‡ 2. ç”»é¢ã‚µã‚¤ã‚ºæ¤œçŸ¥ãƒ•ãƒƒã‚¯ã‚’è¿½åŠ  â¬‡ ---
  const theme = useTheme();
  // 'md' (900px) ã‚ˆã‚Šç‹­ã„ç”»é¢ã‚’ãƒ¢ãƒã‚¤ãƒ«ã¨åˆ¤å®š
  const isMobile = useMediaQuery(theme.breakpoints.down("md"));

  // --- â¬‡ 3. çŠ¶æ…‹ã®åˆæœŸå€¤ã‚’å¤‰æ›´ (æœªé¸æŠçŠ¶æ…‹ã«ã™ã‚‹) â¬‡ ---
  const [selectedIndex, setSelectedIndex] = useState(-1);
  const [selectedStatus, setSelectedStatus] = useState(null);

  const groupedVulnerabilitiesData = vulnerabilitiesData.reduce((acc, vul) => {
    (acc[vul.status] = acc[vul.status] || []).push(vul);
    return acc;
  }, {});

  const selectedVulnerability =
    selectedStatus && groupedVulnerabilitiesData[selectedStatus] && selectedIndex >= 0
      ? groupedVulnerabilitiesData[selectedStatus][selectedIndex]
      : null;

  const handleListItemClick = (status, index) => {
    setSelectedStatus(status);
    setSelectedIndex(index);
  };

  const handleCloseDetailView = () => {
    setSelectedStatus(null);
    setSelectedIndex(-1);
  };

  const handleExited = () => {
    setSelectedStatus(null);
    setSelectedIndex(-1);
  };

  // --- ğŸ¨ 6. å·¦ãƒšã‚¤ãƒ³ï¼ˆä¸€è¦§ï¼‰ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ---
  const ListPane = (
    <Box
      sx={{
        width: { xs: "100%", md: "40%" }, // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
        height: "100%",
        overflowY: "auto",
        borderRight: { xs: "none", md: "1px solid #ddd" },
        bgcolor: "grey.50",
      }}
    >
      {statuses.map((status) => (
        <Accordion
          key={status}
          square
          disableGutters
          elevation={0}
          sx={{ "&:before": { display: "none" } }}
          // selectedStatusãŒnullã®å ´åˆã‚‚è€ƒæ…®ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ã€Œæœªç€æ‰‹ã€ã‚’é–‹ã
          defaultExpanded={status === "æœªç€æ‰‹"}
        >
          <AccordionSummary
            expandIcon={<ExpandMore />}
            sx={{
              bgcolor: "grey.200",
              borderBottom: "1px solid",
              borderColor: "grey.300",
            }}
          >
            <Typography component="span" sx={{ fontWeight: "bold" }}>
              {status} {`(${groupedVulnerabilitiesData[status]?.length || 0})`}
            </Typography>
          </AccordionSummary>
          <AccordionDetails sx={{ p: 0 }}>
            <List component="div" disablePadding>
              {groupedVulnerabilitiesData[status]?.length > 0 ? (
                groupedVulnerabilitiesData[status].map((vul, index) => {
                  return (
                    <ListItemButton
                      key={vul.id}
                      selected={status === selectedStatus && index === selectedIndex}
                      onClick={() => handleListItemClick(status, index)}
                      sx={{
                        pl: 4,
                        borderLeft: "4px solid transparent",
                        "&.Mui-selected": {
                          borderLeftColor: "primary.main",
                          backgroundColor: "blue.50",
                          "&:hover": {
                            backgroundColor: "blue.100",
                          },
                        },
                      }}
                    >
                      <ListItemText
                        primary={
                          <Typography component="span" noWrap>
                            {vul.title}
                          </Typography>
                        }
                        secondary={
                          <Chip
                            label={vul.ssvc}
                            size="small"
                            sx={{
                              ...getSsvcStyles(vul.ssvc),
                              borderRadius: "16px",
                              mt: 0.5,
                              height: "auto",
                              "& .MuiChip-label": {
                                paddingTop: "2px",
                                paddingBottom: "2px",
                              },
                            }}
                          />
                        }
                      />
                    </ListItemButton>
                  );
                })
              ) : (
                <ListItem sx={{ pl: 4 }}>
                  <ListItemText primary="No tasks" sx={{ color: "grey.500" }} />
                </ListItem>
              )}
            </List>
          </AccordionDetails>
        </Accordion>
      ))}
    </Box>
  );

  // --- ğŸ¨ 6. å³ãƒšã‚¤ãƒ³ï¼ˆè©³ç´°ï¼‰ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ ---
  const DetailPane = selectedVulnerability ? (
    <Box
      sx={{
        width: { xs: "100%", md: "60%" }, // ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
        height: "100%",
        overflowY: "auto",
        bgcolor: "grey.50",
      }}
    >
      {/* --- â¬‡ ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ã®ã€Œæˆ»ã‚‹ã€ãƒ˜ãƒƒãƒ€ãƒ¼ â¬‡ --- */}
      {isMobile && (
        <Box
          sx={{
            p: 1,
            borderBottom: 1,
            borderColor: "divider",
            display: "flex",
            alignItems: "center",
            position: "sticky",
            top: 0,
            bgcolor: "grey.50",
            zIndex: 1,
          }}
        >
          <IconButton onClick={handleCloseDetailView} size="small" sx={{ mr: 1 }}>
            <ArrowBackIosNew fontSize="small" />
          </IconButton>
          <Typography variant="subtitle1" sx={{ fontWeight: 600 }} noWrap>
            {selectedVulnerability.title}
          </Typography>
        </Box>
      )}

      {/* è©³ç´°ã‚«ãƒ¼ãƒ‰ã®ãƒ©ãƒƒãƒ‘ãƒ¼ (paddingã‚’ã“ã“ã«ç§»ã™) */}
      <Box sx={{ "& > .MuiPaper-root": { mb: 2.5 }, p: 2 }}>
        {/* ã‚«ãƒ¼ãƒ‰1: è¨­å®š */}
        <Paper variant="outlined">
          <Box
            sx={{
              p: 2,
              display: "flex",
              alignItems: "center",
              gap: 1,
              borderBottom: 1,
              borderColor: "divider",
            }}
          >
            <Settings color="action" />
            <Typography variant="h6" sx={{ fontWeight: 600 }}>
              è¨­å®š
            </Typography>
          </Box>
          <Box p={2}>
            <Stack direction="row" spacing={2}>
              <TextField label="Status" select fullWidth value={selectedVulnerability.status}>
                {statuses.map((s) => (
                  <MenuItem key={s} value={s}>
                    {s}
                  </MenuItem>
                ))}
              </TextField>

              <TextField
                label="Safety Impact"
                select
                fullWidth
                value={selectedVulnerability.safetyImpact}
              >
                {safetyImpacts.map((si) => (
                  <MenuItem key={si} value={si}>
                    {si}
                  </MenuItem>
                ))}
              </TextField>
            </Stack>
          </Box>
          <Box p={2} pt={0}>
            <TextField label="æ‹…å½“è€…" select fullWidth value={selectedVulnerability.assignee}>
              {assignees.map((a) => (
                <MenuItem key={a} value={a}>
                  {a}
                </MenuItem>
              ))}
            </TextField>
          </Box>
        </Paper>

        {/* ã‚«ãƒ¼ãƒ‰2: å›ºå®šè¡¨ç¤ºã®æƒ…å ± */}
        <Paper variant="outlined">
          <Box
            sx={{
              p: 2,
              display: "flex",
              alignItems: "center",
              gap: 1,
              borderBottom: 1,
              borderColor: "divider",
            }}
          >
            <Article color="action" />
            <Typography variant="h6" sx={{ fontWeight: 600 }}>
              è©³ç´°æƒ…å ±
            </Typography>
          </Box>
          <Box p={2}>
            <Grid container spacing={2}>
              {/* --- â¬‡ 8. Grid ã®æ›¸ãæ–¹ã‚’ v5 å½¢å¼ã«ä¿®æ­£ â¬‡ --- */}
              <Grid item xs={12} md={6}>
                <FixedInfoItem
                  label="å®Œäº†æœŸé™"
                  value={selectedVulnerability.deadline}
                  icon={<InfoOutlined fontSize="small" />}
                />
              </Grid>
              <Grid item xs={12} md={6}>
                <FixedInfoItem
                  label="æœ€çµ‚æ›´æ–°"
                  value="2025-10-21"
                  icon={<InfoOutlined fontSize="small" />}
                />
              </Grid>
              <Grid item xs={12} md={6}>
                <FixedInfoItem
                  label="Targetå"
                  value={selectedVulnerability.target}
                  icon={<InfoOutlined fontSize="small" />}
                />
              </Grid>
              <Grid item xs={12} md={6}>
                <FixedInfoItem
                  label="SSVC"
                  value={selectedVulnerability.ssvc}
                  icon={<WarningAmber fontSize="small" />}
                />
              </Grid>
              <Grid item xs={12} md={6}>
                <FixedInfoItem
                  label="ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼"
                  value={selectedVulnerability.packageManager}
                  icon={<InfoOutlined fontSize="small" />}
                />
              </Grid>
              <Grid item xs={12} md={6}>
                <FixedInfoItem
                  label="Target"
                  value={selectedVulnerability.title}
                  icon={<InfoOutlined fontSize="small" />}
                />
              </Grid>
              {/* --- â¬† 8. Grid ã®æ›¸ãæ–¹ã‚’ v5 å½¢å¼ã«ä¿®æ­£ â¬† --- */}
            </Grid>
          </Box>
        </Paper>

        {/* ã‚«ãƒ¼ãƒ‰3: å½±éŸ¿ã¨å¯¾ç­– (å¤‰æ›´ãªã—) */}
        <Paper variant="outlined">{/* ... (ä¸­èº«ã¯çœç•¥) ... */}</Paper>
        <Paper variant="outlined">{/* ... (ä¸­èº«ã¯çœç•¥) ... */}</Paper>

        {/* ã‚«ãƒ¼ãƒ‰4: è„†å¼±æ€§è©³ç´° (å¤‰æ›´ãªã—) */}
        <Paper variant="outlined">{/* ... (ä¸­èº«ã¯çœç•¥) ... */}</Paper>
      </Box>
    </Box>
  ) : !isMobile ? (
    // --- PCã§æœªé¸æŠæ™‚ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ ---
    <Box
      sx={{
        width: "60%",
        height: "100%",
        display: "flex",
        alignItems: "center",
        justifyContent: "center",
        bgcolor: "grey.100",
      }}
    >
      <Typography color="text.secondary">ã‚¿ã‚¹ã‚¯ã‚’é¸æŠã—ã¦ãã ã•ã„</Typography>
    </Box>
  ) : null; // ãƒ¢ãƒã‚¤ãƒ«ã§ã¯æœªé¸æŠæ™‚ã¯ä½•ã‚‚è¡¨ç¤ºã—ãªã„

  return (
    <Dialog
      open={open}
      onClose={onClose}
      maxWidth="lg"
      fullWidth
      TransitionProps={{ onExited: handleExited }}
    >
      <DialogTitle sx={{ fontWeight: 700, borderBottom: 1, borderColor: "divider" }}>
        è„†å¼±æ€§ç®¡ç†
      </DialogTitle>
      <DialogContent sx={{ bgcolor: "grey.50", p: 0 }}>
        {isMobile ? (
          // ==========================
          //  ğŸ“± ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤º
          // ==========================
          <Box sx={{ height: "70vh", position: "relative", overflow: "hidden" }}>
            {/* --- ã‚¹ãƒ†ãƒ¼ã‚¸1: ã‚¿ã‚¹ã‚¯ä¸€è¦§ --- */}

            <Box
              sx={{
                position: "absolute",
                top: 0,
                left: 0,
                width: "100%",
                height: "100%",
              }}
            >
              {ListPane}
            </Box>

            {/* --- ã‚¹ãƒ†ãƒ¼ã‚¸2: ã‚¿ã‚¹ã‚¯è©³ç´° --- */}
            <Slide
              direction="left"
              in={!!selectedVulnerability} // é¸æŠæ™‚ã«è¡¨ç¤º
              mountOnEnter
              unmountOnExit
            >
              <Box
                sx={{
                  position: "absolute",
                  top: 0,
                  left: 0,
                  width: "100%",
                  height: "100%",
                }}
              >
                {DetailPane}
              </Box>
            </Slide>
          </Box>
        ) : (
          // ==========================
          //  ğŸ–¥ï¸ PCè¡¨ç¤º
          // ==========================
          <Box sx={{ display: "flex", height: "70vh" }}>
            {ListPane}
            {DetailPane}
          </Box>
        )}
      </DialogContent>
    </Dialog>
  );
}
