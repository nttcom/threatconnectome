import NavigateNextIcon from "@mui/icons-material/NavigateNext";
import { Box, Breadcrumbs, Link, Stack, Typography } from "@mui/material";
import PropTypes from "prop-types";
import React from "react";
import { useNavigate } from "react-router-dom";

import { VulnerabilityView } from "./VulnerabilityView";

export function VulnerabilityPageView(props) {
  const {
    topic,
    topicActions,
    focusedServiceTag,
    matchedTopicTag,
    service,
    hrefToServicePage,
    hrefToTagPage,
  } = props;

  window.scrollTo({ top: 0, behavior: "instant" });

  const navigate = useNavigate();

  return (
    <>
      <Breadcrumbs separator={<NavigateNextIcon fontSize="small" />} aria-label="breadcrumb">
        <Link
          onClick={() => navigate(hrefToServicePage)}
          sx={{ color: "text.primary", cursor: "pointer" }}
        >
          {service.service_name}
        </Link>
        <Link
          onClick={() => navigate(hrefToTagPage)}
          sx={{ color: "text.primary", cursor: "pointer" }}
        >
          {focusedServiceTag.tag_name}
        </Link>
        <Typography sx={{ color: "text.primary" }}>{topic.title}</Typography>
      </Breadcrumbs>
      <Typography variant="h4" sx={{ fontWeight: "bold", py: 2 }}>
        {topic.title}
      </Typography>
      <Box>
        <Stack spacing={2} sx={{ mb: 3 }}>
          <VulnerabilityView
            topic={topic}
            topicActions={topicActions}
            matchedTopicTag={matchedTopicTag}
            service={service}
          />
        </Stack>
      </Box>
    </>
  );
}
VulnerabilityPageView.propTypes = {
  topic: PropTypes.object.isRequired,
  topicActions: PropTypes.array.isRequired,
  focusedServiceTag: PropTypes.object.isRequired,
  matchedTopicTag: PropTypes.object.isRequired,
  service: PropTypes.object.isRequired,
  hrefToServicePage: PropTypes.string.isRequired,
  hrefToTagPage: PropTypes.string.isRequired,
};
